@model PortalCalendarServer.Services.PageViewModel
@using PortalCalendarServer.Models.Entities
@using PortalCalendarServer.Services
@using System.Globalization
@inject IDisplayService displayService

@{
    Layout = null;

    var xkcd = Model.Xkcd;
    var xkcdInfo = xkcd?.GetInfo();
    string? mockOrientation = null; // or "landscape" for testing
    
    var isLandscape = (mockOrientation == "landscape") || (xkcdInfo?.ImageIsLandscape ?? false);
}
@* Use quirks mode until I figure out the issues with oversized landscapes *@
@* <!DOCTYPE html> *@
<html>
<head>
    <meta charset="utf-8" />
    <title>Calendar - XKCD</title>
    
    @* Icon library *@
    <script src="https://cdn.jsdelivr.net/npm/iconify-icon@1.0.7/dist/iconify-icon.min.js"></script>
    
    @* Stylesheets *@
    <link rel="stylesheet" href="/css/calendar_themes/xkcd.css" />
    
    @* EPD Colors *@
    @await Html.PartialAsync("Includes/_EpdColors.cshtml", Model.CssColors)
    
    @* Google Fonts *@
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playpen+Sans:wght@100..800&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap" rel="stylesheet">
</head>

<body>
<div id="visible-area">
    @if (isLandscape)
    {
        <div class="landscape">
            <div class="image-and-alt">
                <h1>@(xkcdInfo?.Title ?? "XKCD Comic")</h1>
                <img src="@(mockOrientation == "landscape" ? "/images/landscape_example.jpg" : xkcdInfo?.ImageAsDataUrl ?? "")" alt="XKCD comic" />
                <div class="alt">
                    @(xkcdInfo?.Alt ?? "")
                </div>
            </div>
        </div>
    }
    else
    {
        <div class="portrait">
            <div class="image-and-alt">
                <img src="@(mockOrientation == "portrait" ? "/images/portrait_example.jpg" : xkcdInfo?.ImageAsDataUrl ?? "")" alt="XKCD comic" />
                <div class="title-and-alt">
                    <h1>@(xkcdInfo?.Title ?? "XKCD Comic")</h1>
                    <div class="alt">
                        @(xkcdInfo?.Alt ?? "")
                    </div>
                </div>
            </div>
        </div>
    }
</div>
</body>
</html>
